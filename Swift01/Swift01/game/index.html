<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus SVG 1.1//EN"
"http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>SGJ</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	    <meta name="apple-mobile-web-app-capable" content="yes">
	    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <script src="./js/lufylegend-1.10.1.js" type="text/javascript"></script>
        <script src="./js/lufylegend.ui-0.14.1.min.js" type="text/javascript"></script>
        <script src="./js/lufylegend.mvc-0.3.1.min.js" type="text/javascript"></script>
        <script src="./js/lufylegend.extension.js?i=1" type="text/javascript"></script>
        <script src="./js/lufylegend.lsharp.js" type="text/javascript"></script>
    </head>
    <body style="margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;font-size: 0;">
        <script src="http://stat.api.4399.com/h5api/h5api.php"></script>
        <div id="mvclegend">loading</div>
        <script>
        LGlobal.keepClear = false;
		LGlobal.aspectRatio = PORTRAIT;
        init(1000/30,"mvclegend",480,800,main);
		function main(){
			var gameId = 100049126;
			var gameName = "三国记";
			var gameWidth = 480;
			var gameHeight = 800;
			h5api.initGame(gameId, gameName,gameWidth, gameHeight);
			LMvc.IMG_PATH = "images/";
			LMvc.ver = "4399网页版";
			//LGlobal.setDebug(true);
			if(LGlobal.mobile){
				LGlobal.align = LStageAlign.TOP_LEFT;
				LGlobal.stageScale = LStageScaleMode.SHOW_ALL;
				LMvc.screenWidth = 480;
				LMvc.screenHeight = LMvc.screenWidth*window.innerHeight/window.innerWidth;
				var mobileScale = 1;
				LGlobal.width = LMvc.screenWidth * mobileScale;
				LGlobal.height = LMvc.screenHeight * mobileScale;
				LGlobal.canvasObj.width  = LGlobal.width;
				LGlobal.canvasObj.height  = LGlobal.height;
				LGlobal.stage.scaleX = LGlobal.stage.scaleY = mobileScale;
			}else{
				LGlobal.stageScale = LStageScaleMode.NO_SCALE;
				LMvc.screenWidth = 480;
				LMvc.screenHeight = 800;
			}
			LSystem.screen(LStage.FULL_SCREEN);
			var loadData = [
					{name:"logo_bg_1",path:LMvc.IMG_PATH+"logo/logo_bg_1.jpg"},
					{name:"logo_bg_2",path:LMvc.IMG_PATH+"logo/logo_bg_2.png"},
					{name:"logo_ryofu",path:LMvc.IMG_PATH+"logo/logo_ryofu.png"},
					{path:"./core/MyController.js",type:"js"},
					{path:"./core/MyModel.js",type:"js"}
			];
			//var loadingLayer = new LoadingSample5();
			//loadingLayer.scaleX = loadingLayer.scaleY = 1/LGlobal.stage.scaleX;
			//addChild(loadingLayer);	
			
			LLoadManage.load(
				loadData,
				function(progress){
					h5api.progress(progress >> 0, "游戏加载中...");
					//loadingLayer.setProgress(progress);
				},
				function(result){
					LMvc.datalist = result;
					//removeChild(loadingLayer);
					loadingLayer = null;
					
					LMvc.init();
				}
			);
		}
        </script>
    </body>
</html>
