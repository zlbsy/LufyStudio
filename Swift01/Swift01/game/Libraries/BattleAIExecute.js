eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('A C(){3 a=G;6(!a.1k){a.1k=19 4g(4f.4a,1)}a.1k.47(41.40,C.2b)};C.1b=A(){6(!C.2a){C.2a=19 C()}9 C.2a};C.3X=A(a,b){C.1b().2I(a,b)};C.2b=A(){3 a=C.1b();a.1L=0;a.1R=0;3 b=a.B.H;3 c=a.Y.H;6(b.z==0){a.1D(R);9}E 6(c.z==0){a.1D(P);9}a.27(b,P,a.B);a.27(c,R,a.B);3U(a.1L<b.z||a.1R<c.z){6(b.z==0&&c.z==0){2v}3 d;6(a.1L>=b.z){d=1}E 6(a.1R>=c.z){d=0}E{d=O.M()}6(d<0.5){a.W=b[a.1L++];a.21(a.W,a.B,a.Y)}E{a.W=c[a.1R++];a.21(a.W,a.Y,a.B)}a.W.J=N;6(a.W.X){a.W.X.J=N}a.W=N;6(b.z==0){a.1D(R);1g.2b();9}E 6(c.z==0){a.1D(P);9}}a.1k.2y();a.1k.2A()};C.I.1D=A(b){3 c=G;3 d=c.B.23;3 e=c.B.1d;3 f=d.1n();1g.1b().3T=R;6(c.1G.X){c.1G.X.2h()}c.1G.2h();2k(c.B.S);2k(c.Y.S);1g.1b().2o.3P();6(b){3 g=f.29();3 h=e.2d();3 i=f.1c().3O();6(i){1g.1J(1S.1H(1I.1N("3N"),e.1n().1c().T(),e.T(),f.1c().T()));3M(e,d);3 j=c.B.H;3L(j,c.B,d)}E{6(e.2d()>0&&e.1n().3K()){3J(e)}6(e.2d()){1g.1J(1S.1H(1I.1N("3I"),f.1c().T(),e.1n().1c().T(),e.T()))}E{1g.1J(1S.1H(1I.1N("33"),f.1c().T(),e.T()))}3 k=c.B.S[0].F();1K=3G(e,h);3 l=0;6(1K){l=1K.F()}3F(g,h,l,c.B.S,e,c.B.1i);l=3D(1K,h,e);e.15(c.B.15);e.2P(c.B.2P);e.D(e.D()+c.B.D);2R(c.B.1i,k,l,e,d)}2S(g,d,c.B.S);6(g==14.3C){e.3B(P)}14.1f.1y.3A(e.F());14.1f.3y(h)}E{1g.1J(1S.1H(1I.1N("3w"),f.1c().T(),e.1n().1c().T(),e.T()));3 g=e.1n().29();3 h=f.29();3 l=d.F();3 m=0;c.Y.S.1V(A(a){6(a.3v()){9}m+=a.D();a.D(0)});e.D(e.D()+m);3 k=c.Y.S[0].F();2R(c.Y.1i,k,l,e,d);2S(g,d,c.B.S)}};C.I.2I=A(c,d){3 e=G;3 f=[];c.H.1V(A(a){a.2u(P);f.K({7:a,1C:22.2z,Z:19 2B(N),2C:A(){9{1t:1}}})});c.1i=[];c.S=c.H;c.H=f;e.B=c;f=[];d.H.1V(A(a){a.2u(P);f.K({7:a,1C:22.3u,Z:19 2B(N),2C:A(){9{1t:1}}})});d.1i=[];d.S=d.H;d.H=f;e.Y=d;3 g=e.B.23.2F();3 h=g.x+1O.1h*0.5-13.1h;3 i=g.y+1O.1v*0.5-13.1v;3 j=e.B.1d.2F();3 k=j.x+1O.1h*0.5;3 l=j.y+1O.1v*0.5-13.1v;3 m=k,2c=l;6(g.x>j.x){m=k-13.1h*2}E{k=m-13.1h*2}14.1f.1y.3o(e.B.23);3 n=19 2T(14.1f,c.S[0].F(),13.1h,13.1v);n.2W=n.2X=2;n.28(h,i);14.1f.1y.30.2Q(n);3 o;6(d.S.z>0){o=19 2T(14.1f,d.S[0].F(),13.1h,13.1v);o.2W=o.2X=2;o.28(m,2c);14.1f.1y.30.2Q(o);n.1z(1u.2j,1A(n,o));o.1z(1u.3n,1A(o,n));n.X=o}E{n.1z(1u.2j,1A(n,{3m:A(){9[m,2c]}}))}n.26=n.x;n.24=n.y;e.1G=n;1g.1b().2o.3l();3k.2r(n,1,{26:k,24:l,3g:1,2t:A(a){3 b=a.1s;b.28(b.26,b.24);14.1f.1y.3e(b.x,b.y)},2w:A(a){3 b=a.1s;6(b.X){b.1z(1u.1Q,1A(b,b.X));b.X.1z(1u.1Q,1A(b.X,b))}E{b.3d(1u.1Q)}}}).2r(n,1,{2t:A(){},2w:A(a){C.1b().1k.2y();C.1b().1k.2A()}})};C.I.1E=A(a){9 G.B.H[0].7.12()==a.7.12()?G.Y.H:G.B.H};C.I.1X=A(a){3 b=G;3 c;3 d;6(b.B.H[0].7.12()==a.7.12()){c=b.B.H;d=b.Y.1i}E{c=b.Y.H;d=b.B.1i}Q(3 i=0,l=c.z;i<l;i++){6(c[i].7.F()==a.7.F()){3 e=[];6(i-1>=0){e.K(c[i-1])}6(i+1<c.z){e.K(c[i+1])}6(3c(a,e)){d.K(a.7.F())}c.3b(i,1);2v}}};C.I.21=A(a,b,c){3 d=G;3 e=b.H;3 f=c.H;3 g=d.1Y(f);6(g.z>0&&O.M()>0.8){3 h=g[g.z*O.M()>>>0];a.X=h;d.1Z(a,h,P);9}3 i=d.1Y(e);6(i.z>0){3 h=i[i.z*O.M()>>>0];6(d.2G(a,h)){9}}6(d.2H(a,e)){9}6(d.20(a,e,17.2J,2K.39)){9}6(d.20(a,f,17.2J,2K.38)){9}3 h=f[f.z*O.M()>>>0];a.X=h;d.1Z(a,h,R)};C.I.2H=A(a,b){3 c=G,36;3 d=[];Q(3 i=0,l=b.z;i<l;i++){3 e=b[i];6(!e.Z.35()){V}1q=c.1p(a,e,17.3H);6(1q){d.K({1s:e,1q:1q})}}6(d==0){9 R}3 f=a.7.U();f.1a(f.1a()+1);3 g=d[(d.z*O.M())>>>0];g.1s.Z.34();9 P};C.I.2V=A(a,b,c){3 d=G;6((a.7.U().1x()==1w.2e)||(a.7.U().1x()==1w.2Z&&O.M()<0.5)){9 R}3 e,10=[];e=d.1p(a,b,17.31);6(e){10.K(e)}6(!e||!c){e=d.1p(a,b,17.2g);6(e){10.K(e)}}6(10.z==0){9 R}3 f=2U(a,b);6(!f){9 P}3 g=a.7.U();g.1a(g.1a()+1);3 e=10[(10.z*O.M())>>>0];3 h=e.1o();a.7.1M(a.7.1M()-e.2N());6(h==17.31){3 i=37(a,b,e);a.7.D(a.7.D()-i);6(a.7.D()==0){d.1X(a)}}E 6(h==17.2g){b.Z.1B(h,e.1r())}9 P};C.I.20=A(a,b,c,d){3 e=G;6((a.7.U().1x()==1w.2e)||(a.7.U().1x()==1w.2Z&&O.M()<0.5)||O.M()<0.8){9 R}3 f,10=[],3a;Q(3 i=0,l=b.z;i<l;i++){3 g=b[i];f=e.1p(a,g,c);6(f){10.K({1s:g,1q:f})}}6(10.z==0){9 R}3 h=a.7.U();h.1a(h.1a()+1);3 j=10[(10.z*O.M())>>>0];3 k=j.1s;3 m=j.1q;6(m.1C()==22.2z){k.Z.1B(m.1o(),m.1r());9 P}3 n=2U(a,k);6(n){k.Z.1B(m.1o(),m.1r())}9 P};C.I.1Z=A(a,b,c){3 d=G;6(d.2V(a,b,c)){9}d.1T(a,b)};C.I.1T=A(b,c){3 d=G;3 e=b.7.U();e.1a(e.1a()+1);3 f;3 g;6(b.J==N){6(b.7.F()==d.W.7.F()){b.J=[];3 h=1U(b,c,1);3 k=[];g=b.7.1e(1P.1Q);3 m=g?g.3f():N;6(m){6(m.2s=="3h"){6(m.1t!=b.7.U().3i()){g=N}}E 6(m.2s=="3j"){3 n=b.7[m.T]();3 o=c.7[m.T]();6((n-o)*m.1t<=0){g=N}}}6(g&&g.16(11.2m)){k=g.1W()}E{3 p=3p(b,c);k=p?[1,1]:[1]}6(g){6(g.16(11.3q)){k[0]+=(g.3r()*0.3s)}}6(g&&g.16(11.3t)){c.J=[]}Q(3 j=0;j<k.z;j++){3 q=19 2q();3 r=h*k[j]>>>0;q.K(c,r>1?r:1);6(g&&g.16(11.3x)){1m=g.3z()}E{1m=b.7.U().1m()}3 s=(1m.z/4)>>>0;6(s){3 t=d.1E(b);Q(3 i=0,l=t.z;i<s&&i<l;i++){6(O.M()>0.5){V}3 u=t[i];6(c.7.F()==u.7.F()||b.7.12()==u.7.12()){V}q.K(u,1U(b,u,1))}}b.J.K(q)}q=b.J[0];6(g&&g.16(11.3E)){3 v=g.1j();3 w=g.2x();3 x=q.1l.2p(A(a){9 a.L.7.F()==c.7.F()});6(x){x.1j=2l.2i(v,w)}}f=d.2M(b,c);b.1F=N;6(f){b.1F=f;3 x=b.J[0].1t=b.J[0].1t*f.3Q()>>>0}6(g&&g.16(11.3R)){3 y=3S(b,c,g.1W());6(y>1){q.1l[0].18=q.1l[0].18*y>>>0}E{g=N}}}E{3 q=19 2q();1m=d.W.7.U().1m();q.K(c,1U(b,c,0.2n));3 s=(1m.z/4)>>>0;6(s){3 t=d.1E(b);Q(3 i=0,l=t.z;i<s&&i<l;i++){6(O.M()>0.5){V}3 u=t[i];6(c.7.F()==u.7.F()||b.7.12()==u.7.12()){V}q.K(u,1U(b,u,0.2n))}}b.J=[q]}}6(!b.1F&&3V(b,c)){3 q=b.J[0];3 r=1.25;6(!g){g=b.7.1e(1P.3W);6(g&&g.16(11.2m)){r=(g.1W())[0]}}q.1l[0].18=q.1l[0].18*r>>>0}d.2D(b,c)};C.I.2D=A(a,b){3 c=G;3 d=a.7.1e(1P.3Y);6(d&&d.16(11.3Z)){3 e=2l.2i(d.1j(),d.2x());Q(3 j=0;e&&j<e.z;j++){3 f=2L.2E(e[j]);a.Z.1B(f.1o(),f.1r())}}3 g=a.J[0];a.J.42();Q(3 i=0,l=g.1l.z;i<l;i++){3 h=g.1l[i];3 k=43(a,h.L);6(!k){V}1e=h.L.7.1e(1P.44);6(1e&&1e.16(11.45)){h.18*=1e.1r()}h.L.18=h.18>h.L.7.D()?h.L.7.D():h.18;h.L.7.D(h.L.7.D()-h.L.18);6(h.L.7.D()==0){c.1X(h.L);V}6(!h.1j||h.1j.z==0){V}Q(3 j=0;j<h.1j.z;j++){3 f=2L.2E(h.1j[j]);6(!f.46()){V}h.L.Z.1B(f.1o(),f.1r())}}c.32(a,b)};C.I.32=A(a,b){3 c=G;6(a.J&&a.J.z>0){6(b.7.D()==0){9}c.1T(a,b);9}6(a.7.F()==c.W.7.F()){6(b.7.D()>0&&!b.J){c.1T(b,a);9}}};C.I.2M=A(b,c){3 d=G;3 e=b.7.1F();6(!e){9 N}3 f=e.48();3 g=d.1E(c);Q(3 i=0;i<f.z;i++){3 h=f[i];3 b=g.2p(A(a){9 a.7.F()==h});6(!b){9 N}}9 e};C.I.2G=A(a,b){3 c=G;3 d=R;6(c.B.H[0].7.12()==a.7.12()){d=P}3 e=c.1p(a,b,17.49);6(!e){9 R}3 f=0;6(d){f=c.B.D}E{f=c.B.1d.D()}6(f==0){9 R}3 g=e.D();6(g>f){g=f}6(d){c.B.D=f-g}E{c.B.1d.D(f-g)}3 h=e.2f();3 i=b.7.2f();6(h>i){h=i}6(h>0){b.7.2f(i-h);g+=h}3 j=b.7.D();3 k=b.7.4b();3 l=j+g>k?k:j+g;b.7.D(l);a.7.1M(a.7.1M()-e.2N());9 P};C.I.1Y=A(a){3 b=[];Q(3 i=0;i<a.z;i++){L=a[i];6(L.7.4c()){b.K(L)}}9 b};C.I.1p=A(a,b,c){3 d=G;3 e=a.7.4d();3 f=[];Q(3 i=0,l=e.z;i<l;i++){3 g=e[i];6(g.4e()!=c||g.1C()!=b.1C){V}6(c==17.2g){6(g.1o()==2O.2Y&&(b.7.U().1x()==1w.2e||b.Z.4h(2O.2Y))){V}}f.K(g)}6(f.z>0){9 f[f.z*O.M()>>>0]}9 N};C.I.27=A(b,c,d){3 e=G;3 f=0;3 g=1;Q(3 i=0,l=b.z;i<l;i++){3 h=b[i].7;f+=h.D();6(h.4i(11.4j)){g=0.5}}6(!c){f=(f*g>>>0);6(d.1d.15()>f){d.1d.15(-f);9}d.1d.15(-d.1d.15())}E{f+=(d.D*0.5);f=(f*g>>>0);6(d.15>f){d.15-=f;9}d.15=0}b.1V(A(a){a.Z.4k()})};',62,269,'|||var|||if|data||return||||||||||||||||||||||||||length|function|attackData|BattleAIExecute|troops|else|id|this|expeditionCharacterList|prototype|herts|push|chara|fakeRandom|null|Math|true|for|false|_characterList|name|currentSoldiers|continue|currentChara|attackTarget|targetData|status|strategys|SkillSubType|seigniorId|BattleCharacterSize|LMvc|food|isSubType|StrategyEffectType|hertValue|new|proficiency|Instance|character|toCity|skill|MapController|SeigniorExecute|width|captives|aids|timer|list|rangeAttackTarget|seignior|strategyType|getCanUseStrategy|strategy|hert|target|value|CharacterAction|height|SoldierType|soldierType|view|setActionDirection|getDirectionFromTarget|addStatus|belong|result|getTargetCharacters|groupSkill|characterView|format|Language|addMessage|retreatCity|attackIndex|MP|get|CityIconConfig|SkillType|ATTACK|targetIndex|String|physicalAttack|calculateHertValue|forEach|attacks|removeChara|getPantCharacter|attackExec|useAidStrategy|characterExec|Belong|fromCity|ctrlY||ctrlX|battleFoodCheck|setCoordinate|chara_id|_Instance|run|targetY|seigniorCharaId|Physical|wounded|Status|remove|getRandomArrays|MOVE|experienceToFeat|Array|ATTACK_COUNT|75|msgView|find|HertParams|to|type|onUpdate|calculation|break|onComplete|aidCount|reset|SELF|start|CharacterStatusIconView|getTerrain|physicalAttackStart|getMaster|position|healExec|toWake|_set|Aid|BattleIntelligentAI|StrategyMasterModel|battleCanGroupSkill|cost|StrategyType|money|addChild|captivesAutomatedProcessing|battleChangeCharactersStatus|BattleCharacterView|calculateHitrateStrategy|useHertStrategy|scaleX|scaleY|BanIncantation|Comprehensive|baseLayer|Attack|counterAttack|win_attack_and_occupy_null|wake|needWake|hitrate|calculateHertStrategyValue|DOWN_STATUS|UP_STATUS|node|splice|calculateHitrateCaptive|changeAction|toPosition|condition|delay|AttackType|attackType|StatusCompare|LTweenLite|hideSeignior|getTo|STAND|positionChangeToCity|calculateDoubleAtt|AMBUSH_INVERSE|powerful|002|NO_COUNTER|ENEMY|isDefCharacter|fail_attack_and_occupy_enemy|ATTACK_RECT|checkSeigniorFail|rects|resetAreaIcon|isAppoint|selectSeignorId|battleCheckRetreatCity|ENEMY_AID|battleCityChange|battleFailChangeCity|Wake|win_attack_and_occupy_enemy|resetTribeCity|isTribe|attackResourcesReturnToCity|lossOfResourcesByTribe|dialog_tribe_invasion_message|isTribeCharacter|showSeignior|correctionFactor|SURPRISE|calculateSkillSurpriseAmend|stop|while|calculateFatalAtt|ANGRY_ATTACK|set|ATTACK_END|SELF_AID|TIMER|LTimerEvent|shift|calculateHitrate|HERT|HERT_MINUS|canChangeStatus|addEventListener|group|Supply|speed|maxTroops|isPantTroops|strategies|effectType|LGlobal|LTimer|hasStatus|hasSkill|THRIFT|downloadAidStatusRandom'.split('|'),0,{}))